## 📌 인터럽트란?
> 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우 현재 실행중인 작업을 일시 중단하고, 발생된 상황을 우선 처리한 후 실행중이던 작업으로 복귀하여 계속 처리하는 것을 말한다.

인터럽트는 크게 하드웨어 인터럽트와 소프트웨어 인터럽트로 나뉜다.

**하드웨어 인터럽트**
하드웨어가 발생시키는 인터럽트로, CPU가 아닌 다른 하드웨어 장치가 cpu에 어떤 사실을 알려주거나 cpu 서비스를 요청해야 할 경우 발생시킨다.

**소프트웨어 인터럽트**
소프트웨어가 발생시키는 인터럽트이다. 소프트웨어(사용자 프로그램)가 스스로 인터럽트 라인을 세팅한다.

인터럽트를 발생시키기 위해 하드웨어/소프트웨어는 cpu내에 있는 인터럽트 라인을 세팅하여 인터럽트를 발생시킨다.
cpu는 매번 명령을 수행하기 전에 인터럽트라인이 세팅되어있는지를 검사한다.

<br>

---

## 📌  인터럽트와 특권 명령

CPU가 수행하는 명령에는 일반 명령과 특권 명령이 있다.

- `일반 명령` : 메모리에서 자료를 읽어오고, CPU에서 계산을 하는 등의 명령이고 모든 프로그램이 수행할 수 있는 명령

- `특권 명령` : 보안이 필요한 명령으로 입출력 장치, 타이머 등의 장치를 접근하는 명령이다. 특권 명령은 항상 운영체제만이 수행할 수 있다.
<br>

운영체제는 하드웨어적인 보안을 유지하기 위해 기본적으로 두가지 연산을 지원한다. 

- `kernel mode` : 운영체제가 CPU의 제어권을 가지고 명령을 수행하는 모드로 일반 명령과 특권 명령 모두 수행할 수 있다.
- `user mode` : 일반 사용자 프로그램이 CPU제어권을 가지고 명령을 수행하는 모드이기 때문에 일반 명령만을 수행할 수 있다.



<br>

---


## 📌 인터럽트의 실행 과정과 문맥 교환
**(1) 실행 과정**
![](https://velog.velcdn.com/images/jihyun/post/920b275c-d334-443b-b21e-61e303755546/image.png)

1. 인터럽트 신호에 의하여 현재 실행 중인 명령어를 종료
2. 레지스터의 모든 정보를 스택 영역(또는 프로세스 제어 블록/PCB)에 전송
3. 프로그램 카운터에 인터럽트 처리 프로그램(인터럽트 핸들러/서비스 루틴)의 시작 위치를 저장
4. 제어권이 인터럽트 처리 프로그램을 실행
5. 4번이 완료되면 스택 영역(또는 PCB)에 위치한 내용을 다시 레지스터에 저장
6. 프로그램 카운터에 중단된 프로그램의 시작 위치를 저장
7. 중단된 프로그램을 재실행

<br>

**(2) 문맥 교환**

이렇게 운영체제가 현재 프로세스를 스택이나 PCB에 저장하고 다른 프로세스를 레지스터에 저장하여, 다른 프로그램이 CPU를 이용하도록 하는 것을 문맥 교환(Context Switch)이라 한다. 문맥 교환은 인터럽트말고도 시스템 호출 등에 의해서도 일어난다.

 
<br>

---

## 📌 인터럽트의 역할
- 인터럽트는 현대의 운영체제가 하드웨어와의 상호작용을 향상시켜, CPU가 멀티 프로그래밍을 가능하게 하는 핵심적인 역할을 한다.

- 인터럽트는 갑작스러운 컴퓨터의 전류 공급 중단이나, 사용자의 입력, 입출력 작업의 완료, 운영체제에 의한 긴급 요청 등과 같은 긴급한 상황에 대처하기 위해서도 필요하다.

만약 인터럽트가 없다면 CPU는 장치의 상태를 수시로 점검해야 하는 상황이 발생하는데, 그동안 다른 작업을 수행할 수 없어서 CPU의 사용성(utilization)을 낭비시킨다.



